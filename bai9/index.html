<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bai 9</title>
    <script src="coreElement.js"></script>
    <script src="main-container.js"></script>
    <script src="product-item.js"></script>
    <style>

        html, body { 
         width: 100%;
         padding: 0; 
         margin: 0; 
         display: flex; 
         flex-direction: column;
              }
    .container{
        background-image: linear-gradient(180deg, #00eacc, #3485ee);
        width: 100%;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
            }
    .items{
        background-color: white;
        width: calc(30% - 20px);
        display: flex;
        flex-direction: column;
        }
     h1{
        width:100%;
        height: 40px;
        margin-left: 10px;
     }
     .row1{
        display: flex;
        flex-direction: row;
        margin-left: 10px;
        padding-right: 10px;
        /* padding: 40px; */
     }
     .row1 input {
        width: 80%;
        border-radius: 5px;
     }
     .row1 button{  
        margin-left: 5px;
        background-color: #9845ed;
        border-radius: 5px;
     }
     .row1 button img {
        width: 30px;
        height: 30px;
        border-radius: 5px;
     }
     
     .row3{
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 10px;
        padding-left: 10px;
        padding-right: 10px;
        padding-bottom: 5px;
     }
     .row3 button{
        background-color: #9b42f6;
        padding: 5px 10px;
        border-radius: 5px;
     }
     
    </style>
</head>
<body>
    <div class="container">
        <div class="items">
            <h1>Todo App</h1>
        <div class="row1">
            <input  type="text" placeholder="Add your new todo" class="content" id="content">
            <button class="add" id="add">
                <img src="./image/add.svg" alt="add">
            </button>
        </div>
        <main-container id="container">

        </main-container>
        <div class="row3">
            <span>you have <span id="pendingTasks"></span> pending tasks</span>
            <button id="removeAll" onclick="deleteAll()" >Clear All</button>
        </div>
    </div>
        <script>
            let list = [
                {
                    name:"Buy a new gaming laptop",
                },
                {
                    name:"Complete a previous task",
                },
                {
                    name:"Create video for Youtube",
                },
                {
                    name:"Create a new portflolio site",
                },
            ];
    const container = document.querySelector('main-container');
    const processItem = (item, index) => {
        return  `
            <product-item
                name="${item.name}"
                index="${index}"
            ></product-item>
        `;
    }
    const listHTML = list.map(processItem);
    const joined = listHTML.join('\n');
    if (container) {
        container.innerHTML = joined;
    }
    // khai báo tổng số item 
    const pendingTasksNumber = document.querySelector('#pendingTasks');
    pendingTasksNumber.textContent = list.length;
    // thêm phần tử 
            // khai báo
            const  buttonAdd = document.querySelector('#add');
            const content = document.querySelector('#content');
            // bước 2 nếu click vào thì thêm phần tử
            if (buttonAdd){
                buttonAdd.onclick = () =>{
                    console.log('button add click');
            // khai báo nội dung cần thêm ứng với content.value
                    let name = content.value;
                    let itemAdd = {
                        name : name,
                    };
                    const listAdd = [];
                    listAdd.push(itemAdd);
            //concat nối các mảng với nhau thành 1 mảng mới
                    const newList = list.concat(listAdd);
                    list = newList;
                    const listHTML = list.map(processItem);
            const joined = listHTML.join('\n');
            if (container) {
            container.innerHTML = joined;
            }   
            const pendingTasksNumber = document.querySelector('#pendingTasks');
            pendingTasksNumber.textContent = list.length;
                }

            }
            
            // removeall
            // khai báo 
            const removeAll = document.querySelector('#removeAll');
            // tạo function xóa     
            function deleteAll(){
                list = [];
                const listHTML = list.map(processItem);
                const joined = listHTML.join('\n');
                if (container) {
                container.innerHTML = joined;
                } 
                const pendingTasksNumber = document.querySelector('#pendingTasks');
                pendingTasksNumber.textContent = list.length;  
            }
            

        // remove 1 phân tử 
        // bước 1 khai báo biến
        const remove = document.querySelector('#remove');
        // bước 2 khi click vào button remove thì sẽ xóa 1 phần tử
       function deleteItem(index){
        debugger;
            const listRemove = [];
            for ( let i = 0; i < list.length; i++){
                if ( i === index){
                    // ko làm gì 
                } else {
                    listRemove.push(list[i]);
                }
            }
            list = listRemove;
            const listHTML = list.map(processItem);
            const joined = listHTML.join('\n');
            if (container) {
            container.innerHTML = joined;
            }   
            const pendingTasksNumber = document.querySelector('#pendingTasks');
            pendingTasksNumber.textContent = list.length; 
            }
          

        </script>
</body>
</html>